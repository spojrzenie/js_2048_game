{"version":3,"sources":["scripts/main.js"],"names":["gameStatus","score","gameBoard","startButton","document","getElementById","touchStartPos","x","y","touchEndPos","handleTouchStart","e","touches","clientX","clientY","preventDefault","handleTouchEnd","changedTouches","handleSwipeGesture","handleTouchMove","dx","dy","absDx","Math","abs","absDy","max","moveRight","moveLeft","moveDown","moveUp","showBoardToUser","isGameOver","isWin","emojiElement","emoji","showScore","innerHTML","style","display","classList","add","addEventListener","remove","isZoomAnimationEnded","contains","countScore","sum","querySelector","textContent","gameOn","gameOff","forEach","row","fill","randomRow","min","minCeiled","ceil","maxFloored","floor","random","randomColumn","waitFor","ms","Promise","resolve","setTimeout","generateTiles","column","tileValue","addTwoTiles","board","table","rowIndex","length","columnIndex","cellValue","cell","rows","cells","filter","className","startsWith","registerAction","j","i","k","keyEvent","up","key","right","down","left","gameContainer","passive"],"mappings":"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","file":"main.507eb845.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nlet gameStatus = 'off';\nlet score = 0;\n\nconst gameBoard = [\n  [null, null, null, null],\n  [null, null, null, null],\n  [null, null, null, null],\n  [null, null, null, null],\n];\n\nconst startButton = document.getElementById('startGame');\n\nconst touchStartPos = {\n  x: 0, y: 0,\n};\n\nconst touchEndPos = {\n  x: 0, y: 0,\n};\n\nfunction handleTouchStart(e) {\n  touchStartPos.x = e.touches[0].clientX;\n  touchStartPos.y = e.touches[0].clientY;\n  e.preventDefault();\n}\n\nfunction handleTouchEnd(e) {\n  touchEndPos.x = e.changedTouches[0].clientX;\n  touchEndPos.y = e.changedTouches[0].clientY;\n  handleSwipeGesture();\n  e.preventDefault();\n}\n\nfunction handleTouchMove(e) {\n  e.preventDefault();\n}\n\nfunction handleSwipeGesture() {\n  const dx = touchEndPos.x - touchStartPos.x;\n  const dy = touchEndPos.y - touchStartPos.y;\n  const absDx = Math.abs(dx);\n  const absDy = Math.abs(dy);\n\n  if (Math.max(absDx, absDy) > 50) {\n    if (absDx > absDy) {\n      if (dx > 0) {\n        moveRight();\n      } else {\n        moveLeft();\n      }\n    } else {\n      if (dy > 0) {\n        moveDown();\n      } else {\n        moveUp();\n      }\n    }\n    showBoardToUser(gameBoard);\n    isGameOver();\n    isWin();\n  }\n}\n\nconst emojiElement = document.getElementById('emoji');\n\nconst emoji = (showScore) => {\n  emojiElement.innerHTML = `+${showScore}`;\n  emojiElement.style.display = 'block';\n  emojiElement.classList.add('zoom-in');\n\n  emojiElement.addEventListener('animationend', () => {\n    emojiElement.classList.remove('zoom-in');\n    emojiElement.classList.add('fade-out');\n  });\n\n  let isZoomAnimationEnded = false;\n\n  emojiElement.addEventListener('animationend', () => {\n    if (!isZoomAnimationEnded) {\n      isZoomAnimationEnded = true;\n\n      return;\n    }\n\n    if (emojiElement.classList.contains('fade-out')) {\n      emojiElement.style.display = 'none';\n      emojiElement.classList.remove('fade-out');\n      emojiElement.innerHTML = '';\n    }\n  });\n};\n\nfunction countScore(sum) {\n  score += sum;\n\n  const showScore = document.querySelector('.game-score');\n\n  showScore.classList.add('zoom-in');\n\n  showScore.addEventListener('animationend', () => {\n    showScore.classList.remove('zoom-in');\n  });\n\n  showScore.textContent = score;\n\n  emoji(sum);\n}\n\nfunction gameOn() {\n  gameStatus = 'on';\n\n  startButton.textContent = 'Restart';\n\n  const infoStart = document.querySelector('.message-start');\n\n  infoStart.classList.add('hidden');\n}\n\nfunction gameOff() {\n  gameStatus = 'off';\n\n  startButton.textContent = 'Start';\n\n  gameBoard.forEach(row => {\n    row.fill(null);\n  });\n\n  showBoardToUser(gameBoard);\n\n  const infoStart = document.querySelector('.message-start');\n\n  infoStart.classList.remove('hidden');\n\n  const infoLose = document.querySelector('.message-lose');\n\n  infoLose.classList.add('hidden');\n\n  const infoWin = document.querySelector('.message-win');\n\n  infoWin.classList.add('hidden');\n\n  score = 0;\n\n  const showScore = document.querySelector('.game-score');\n\n  showScore.textContent = score;\n}\n\nfunction randomRow(min, max) {\n  const minCeiled = Math.ceil(min);\n  const maxFloored = Math.floor(max);\n\n  return Math.floor(Math.random() * (maxFloored - minCeiled)) + minCeiled;\n}\n\nfunction randomColumn(min, max) {\n  const minCeiled = Math.ceil(min);\n  const maxFloored = Math.floor(max);\n\n  return Math.floor(Math.random() * (maxFloored - minCeiled)) + minCeiled;\n}\n\nfunction waitFor(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\nfunction generateTiles() {\n  let row, column;\n  const randomNumber = Math.random();\n\n  const tileValue = randomNumber < 0.1 ? 4 : 2;\n\n  do {\n    row = randomRow(0, 4);\n    column = randomColumn(0, 4);\n  } while (gameBoard[row][column] !== null);\n\n  gameBoard[row][column] = tileValue;\n\n  return waitFor(100);\n}\n\nfunction addTwoTiles() {\n  generateTiles();\n  generateTiles();\n}\n\nfunction showBoardToUser(board) {\n  const table = document.querySelector('.game-field');\n\n  for (let rowIndex = 0; rowIndex < board.length; rowIndex++) {\n    for (let columnIndex = 0;\n      columnIndex < board[rowIndex].length; columnIndex++) {\n      const cellValue = board[rowIndex][columnIndex];\n\n      const cell = table.rows[rowIndex].cells[columnIndex];\n\n      cell.textContent = cellValue;\n\n      const classesToRemove = [...cell.classList]\n        .filter(className => className.startsWith('field-cell--'));\n\n      classesToRemove.forEach(className => cell.classList.remove(className));\n\n      if (cellValue != null) {\n        cell.classList.add('field-cell--' + cellValue);\n      };\n    }\n  }\n}\n\ndocument.getElementById('startGame').addEventListener('click', () => {\n  if (gameStatus === 'on') {\n    gameOff();\n  } else {\n    addTwoTiles();\n    gameOn();\n    showBoardToUser(gameBoard);\n  };\n});\n\nfunction moveUp() {\n  let registerAction = 0;\n\n  for (let j = 0; j < gameBoard.length; j++) {\n    for (let i = 1; i < gameBoard.length; i++) {\n      if (gameBoard[i][j] != null) {\n        let k = i - 1;\n\n        while (k >= 0 && (gameBoard[k][j] === null\n          || gameBoard[k][j] === gameBoard[i][j])) {\n          if (gameBoard[k][j] === gameBoard[i][j]) {\n            gameBoard[k][j] *= 2;\n\n            countScore(gameBoard[k][j]);\n\n            const cell = document.querySelector(`.game-field\n            tr:nth-child(${k + 1})\n            td:nth-child(${j + 1})`);\n\n            cell.classList.add('zoom-in');\n\n            cell.addEventListener('animationend', () => {\n              cell.classList.remove('zoom-in');\n            });\n\n            gameBoard[i][j] = null;\n\n            registerAction++;\n\n            break;\n          } else if (gameBoard[k][j] === null) {\n            k--;\n          }\n        }\n\n        if (k !== i - 1) {\n          gameBoard[k + 1][j] = gameBoard[i][j];\n          gameBoard[i][j] = null;\n\n          registerAction++;\n        }\n      }\n    }\n  }\n\n  if (registerAction !== 0) {\n    generateTiles();\n    registerAction = 0;\n  }\n}\n\nfunction moveDown() {\n  let registerAction = 0;\n\n  for (let j = 0; j < gameBoard.length; j++) {\n    for (let i = gameBoard.length - 2; i >= 0; i--) {\n      if (gameBoard[i][j] != null) {\n        let k = i + 1;\n\n        while (k < gameBoard.length && (gameBoard[k][j] === null\n          || gameBoard[k][j] === gameBoard[i][j])) {\n          if (gameBoard[k][j] === gameBoard[i][j]) {\n            gameBoard[k][j] *= 2;\n\n            countScore(gameBoard[k][j]);\n\n            const cell = document.querySelector(`.game-field\n            tr:nth-child(${k + 1})\n            td:nth-child(${j + 1})`);\n\n            cell.classList.add('zoom-in');\n\n            cell.addEventListener('animationend', () => {\n              cell.classList.remove('zoom-in');\n            });\n\n            gameBoard[i][j] = null;\n\n            registerAction++;\n\n            break;\n          } else if (gameBoard[k][j] === null) {\n            k++;\n          }\n        }\n\n        if (k !== i + 1) {\n          gameBoard[k - 1][j] = gameBoard[i][j];\n          gameBoard[i][j] = null;\n\n          registerAction++;\n        }\n      }\n    }\n  }\n\n  if (registerAction !== 0) {\n    generateTiles();\n    registerAction = 0;\n  }\n}\n\nfunction moveLeft() {\n  let registerAction = 0;\n\n  for (let i = 0; i < gameBoard.length; i++) {\n    for (let j = 1; j < gameBoard[i].length; j++) {\n      if (gameBoard[i][j] !== null) {\n        let k = j - 1;\n\n        while (k >= 0 && (gameBoard[i][k] === null\n          || gameBoard[i][k] === gameBoard[i][j])) {\n          if (gameBoard[i][k] === gameBoard[i][j]) {\n            gameBoard[i][k] *= 2;\n\n            countScore(gameBoard[i][k]);\n\n            const cell = document.querySelector(`.game-field\n            tr:nth-child(${i + 1})\n            td:nth-child(${k + 1})`);\n\n            cell.classList.add('zoom-in');\n\n            cell.addEventListener('animationend', () => {\n              cell.classList.remove('zoom-in');\n            });\n\n            gameBoard[i][j] = null;\n\n            registerAction++;\n\n            break;\n          } else if (gameBoard[i][k] === null) {\n            k--;\n          }\n        }\n\n        if (k !== j - 1) {\n          gameBoard[i][k + 1] = gameBoard[i][j];\n          gameBoard[i][j] = null;\n\n          registerAction++;\n        }\n      }\n    }\n  }\n\n  if (registerAction !== 0) {\n    generateTiles();\n    registerAction = 0;\n  }\n}\n\nfunction moveRight() {\n  let registerAction = 0;\n\n  for (let i = 0; i < gameBoard.length; i++) {\n    for (let j = gameBoard[i].length - 2; j >= 0; j--) {\n      if (gameBoard[i][j] !== null) {\n        let k = j + 1;\n\n        while (k < gameBoard[i].length && (gameBoard[i][k] === null\n          || gameBoard[i][k] === gameBoard[i][j])) {\n          if (gameBoard[i][k] === gameBoard[i][j]) {\n            gameBoard[i][k] *= 2;\n\n            countScore(gameBoard[i][k]);\n\n            const cell = document.querySelector(`.game-field\n            tr:nth-child(${i + 1})\n            td:nth-child(${k + 1})`);\n\n            cell.classList.add('zoom-in');\n\n            cell.addEventListener('animationend', () => {\n              cell.classList.remove('zoom-in');\n            });\n\n            gameBoard[i][j] = null;\n\n            registerAction++;\n\n            break;\n          } else if (gameBoard[i][k] === null) {\n            k++;\n          }\n        }\n\n        if (k !== j + 1) {\n          gameBoard[i][k - 1] = gameBoard[i][j];\n          gameBoard[i][j] = null;\n\n          registerAction++;\n        }\n      }\n    }\n  }\n\n  if (registerAction !== 0) {\n    generateTiles();\n    registerAction = 0;\n  }\n}\n\nfunction isGameOver() {\n  for (let i = 0; i < gameBoard.length; i++) {\n    for (let j = 0; j < gameBoard[i].length; j++) {\n      if (gameBoard[i][j] === null) {\n        return false;\n      }\n\n      if (\n        (i > 0 && gameBoard[i][j] === gameBoard[i - 1][j])\n        || (i < gameBoard.length - 1\n          && gameBoard[i][j] === gameBoard[i + 1][j])\n        || (j > 0 && gameBoard[i][j] === gameBoard[i][j - 1])\n        || (j < gameBoard[i].length - 1\n          && gameBoard[i][j] === gameBoard[i][j + 1])\n      ) {\n        return false;\n      }\n    }\n  }\n\n  const infoLose = document.querySelector('.message-lose');\n\n  infoLose.classList.remove('hidden');\n}\n\nfunction isWin() {\n  for (let i = 0; i < gameBoard.length; i++) {\n    for (let j = 0; j < gameBoard[i].length; j++) {\n      if (gameBoard[i][j] === 2048) {\n        const infoWin = document.querySelector('.message-win');\n\n        infoWin.classList.remove('hidden');\n      }\n    }\n  }\n}\n\ndocument.addEventListener('keydown', keyEvent => {\n  const up = keyEvent.key === 'ArrowUp' || keyEvent.key === 'w';\n  const right = keyEvent.key === 'ArrowRight' || keyEvent.key === 'd';\n  const down = keyEvent.key === 'ArrowDown' || keyEvent.key === 's';\n  const left = keyEvent.key === 'ArrowLeft' || keyEvent.key === 'a';\n\n  if (gameStatus === 'on') {\n    if (up || right || down || left) {\n      keyEvent.preventDefault();\n    }\n\n    switch (true) {\n      case up:\n        moveUp();\n        break;\n\n      case right:\n        moveRight();\n        break;\n\n      case down:\n        moveDown();\n        break;\n\n      case left:\n        moveLeft();\n        break;\n\n      default:\n    }\n\n    showBoardToUser(gameBoard);\n    isGameOver();\n    isWin();\n  }\n});\n\nconst gameContainer = document.querySelector('.game-field');\n\ngameContainer.addEventListener(\n  'touchstart',\n  handleTouchStart,\n  { passive: false }\n);\n\ngameContainer.addEventListener(\n  'touchmove',\n  handleTouchMove,\n  { passive: false }\n);\n\ngameContainer.addEventListener(\n  'touchend',\n  handleTouchEnd,\n  { passive: false }\n);\n"]}